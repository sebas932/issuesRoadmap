<html>
    <head>
        <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
        <title>Issues GitHub - {{ repoInfo.full_name }}</title>

        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css">


        <link rel="stylesheet" href="../../css/master.css">

    </head>
    <body>
      <div class="container">
        <p class="display-3">Issues Roadmap</p>
        <div class="form-group">
          <div class="">
            <img src="{{ repoInfo.owner.avatar_url }}" class="rounded float-left" width="55" alt="">
            <h4>{{ repoInfo.full_name }}</h4>
            <p>{{ repoInfo.description }}</p>
            <small> ID: {{ repoInfo.id }} </small>
          </div>
        </div>

        <form action="">
          <div class="row">
            <!-- Milestone Filter -->
            <div class="col-md-6">
              <div class="input-group">
                <select class="custom-select" id="milestoneSelect" name="milestoneID" aria-label="Milestone">
                  <option value="" >All</option>
                  {% for milestone in milestones %}
                    <option value="{{ milestone.number }}" {% if (milestone.number == milestoneID) %}selected{% endif %}>{{ milestone.title }}</option>
                  {% endfor %}
                </select>
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" type="submit">Find Issues</button>
                </div>
              </div>
            </div>
            <!-- Zenhub Data -->
            <div class="col-md-3">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="zenhubActive" name="zenhubActive" {% if zenhubActive %}checked{% endif%} value="true">
                <label class="form-check-label" for="zenhubActive">ZenHub Data</label>
              </div>
            </div>
            <!-- Issues State -->
            <div class="col-md-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="state" id="state" value="open" {% if state == "open" %}checked{% endif %}>
                <label class="form-check-label" for="exampleRadios1">Open</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="state" id="state" value="closed" {% if state == "closed" %}checked{% endif %}>
                <label class="form-check-label" for="exampleRadios1">Closed</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="state" id="state" value="all" {% if state == "all" %}checked{% endif %}>
                <label class="form-check-label" for="exampleRadios1">Both <small>(All)</small></label>
              </div>
            </div>
          </div>
        </form>

        <hr>

        <p>
          Total issues found: <strong>{{ issues|length }}</strong>
          <br><code>{{ query }}</code>
        </p>

        <table id="issuesList" class="table table-striped table-bordered" style="width:100%">
          <thead>
            <tr>
              <th>Milestone</th>
              <th>GitHub ID</th>
              <th>Title</th>
              <th>Label(s)</th>
              <th>Responsible</th>
              <th>Status</th>
              {% if zenhubActive %}
                <th>Estimate <br><small>ZenHub</small></th>
                <th>Pipeline <br><small>ZenHub</small></th>
              {% else %}

              {% endif%}
            </tr>
          </thead>
          <tbody>
            {% for issue in issues %}
              <tr>
                <td>
                  {{ issue.milestone.title }}
                </td>
                <td class="text-center"> <a href="{{ issue.html_url}}">{{ issue.number }} </a> </td>
                <td>{{ issue.title }}</td>
                <td>
                  {% for label in issue.labels %}
                    <span class="badge " style="border-bottom-color: #{{ label.color }};">{{ label.name }}</span>
                  {% endfor %}
                </td>
                <td class="text-center"> {{ issue.assignee.login }}</td>
                <td class="text-center"> {{ issue.state}}</td>
                {% if zenhubActive %}
                  <td class="text-center"> {{ issue.zenhub.estimate.value }} </td>
                  <td class="text-center"> {{ issue.zenhub.pipeline.name }} </td>
                {% else %}

                {% endif%}
              </tr>
            {% endfor %}

          </tbody>
        </table>

        <br>
        <footer>

        </footer>
      </div>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
      <script src="../../js/main.js" charset="utf-8"></script>

    </body>

</html>
